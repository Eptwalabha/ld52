[gd_scene load_steps=42 format=3 uid="uid://46ri45wr2fma"]

[ext_resource type="Script" path="res://scene/gnome/gnome.gd" id="1_iam6g"]
[ext_resource type="Texture2D" uid="uid://dsxle7blcgnoi" path="res://resource/images/target.svg" id="2_qjudr"]
[ext_resource type="Script" path="res://scene/gnome/npc_state_idle.gd" id="2_ulmaw"]
[ext_resource type="Script" path="res://scene/gnome/npc_state_walk.gd" id="3_inp0e"]
[ext_resource type="Script" path="res://scene/gnome/npc_state_jump.gd" id="4_yxcar"]
[ext_resource type="Script" path="res://scene/gnome/npc_state_escape.gd" id="5_h0d3m"]
[ext_resource type="Script" path="res://scene/gnome/npc_state_drink.gd" id="7_73qw6"]
[ext_resource type="Script" path="res://scene/gnome/npc_state_leave.gd" id="8_bpmka"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_yl887"]
radius = 7.0
height = 24.0

[sub_resource type="SeparationRayShape2D" id="SeparationRayShape2D_c7vyp"]
length = 26.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hi4k3"]
size = Vector2(34, 16)

[sub_resource type="Animation" id="Animation_b1xy4"]
resource_name = "drink"
loop_mode = 1

[sub_resource type="Animation" id="Animation_c1j2b"]
resource_name = "drink-end"

[sub_resource type="Animation" id="Animation_icijn"]
resource_name = "drink-start"

[sub_resource type="Animation" id="Animation_2norx"]
resource_name = "emerge-from-ground"

[sub_resource type="Animation" id="Animation_iwmln"]
resource_name = "hurt"

[sub_resource type="Animation" id="Animation_67hq8"]
resource_name = "idle"
loop_mode = 2

[sub_resource type="Animation" id="Animation_3s1vb"]
resource_name = "on-air"
loop_mode = 1

[sub_resource type="Animation" id="Animation_apj6a"]
resource_name = "walk"
loop_mode = 1

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3ehli"]
_data = {
"drink": SubResource("Animation_b1xy4"),
"drink-end": SubResource("Animation_c1j2b"),
"drink-start": SubResource("Animation_icijn"),
"emerge-from-ground": SubResource("Animation_2norx"),
"hurt": SubResource("Animation_iwmln"),
"idle": SubResource("Animation_67hq8"),
"on-air": SubResource("Animation_3s1vb"),
"walk": SubResource("Animation_apj6a")
}

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_kceol"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_puxt4"]
animation = &"hurt"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jjcty"]
animation = &"idle"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_f5h0b"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y8e42"]
animation = &"on-air"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_c4yih"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hf1wx"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_f0um0"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_02la8"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ffum6"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wgco3"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_45gl1"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_v3sjw"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_w8lyv"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ulmja"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jww4t"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4e6ue"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_dtv0y"]
states/End/position = Vector2(981, 100)
states/Start/position = Vector2(281, 100)
states/drink/node = SubResource("AnimationNodeStateMachine_kceol")
states/drink/position = Vector2(697, 242)
states/hurt/node = SubResource("AnimationNodeAnimation_puxt4")
states/hurt/position = Vector2(697, -24)
states/idle/node = SubResource("AnimationNodeAnimation_jjcty")
states/idle/position = Vector2(555, 100)
states/leave/node = SubResource("AnimationNodeStateMachine_f5h0b")
states/leave/position = Vector2(804, 100)
states/on-air/node = SubResource("AnimationNodeAnimation_y8e42")
states/on-air/position = Vector2(402, 242)
states/walk/node = SubResource("AnimationNodeAnimation_c4yih")
states/walk/position = Vector2(402, -24)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_hf1wx"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_f0um0"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_02la8"), "idle", "hurt", SubResource("AnimationNodeStateMachineTransition_ffum6"), "hurt", "idle", SubResource("AnimationNodeStateMachineTransition_wgco3"), "idle", "on-air", SubResource("AnimationNodeStateMachineTransition_45gl1"), "on-air", "idle", SubResource("AnimationNodeStateMachineTransition_v3sjw"), "idle", "leave", SubResource("AnimationNodeStateMachineTransition_w8lyv"), "leave", "End", SubResource("AnimationNodeStateMachineTransition_ulmja"), "idle", "drink", SubResource("AnimationNodeStateMachineTransition_jww4t"), "drink", "idle", SubResource("AnimationNodeStateMachineTransition_4e6ue")]
graph_offset = Vector2(-66, -233)

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_jijse"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_rsec6"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_qrla6"]

[node name="Gnome" type="CharacterBody2D"]
collision_layer = 8
collision_mask = 10
floor_snap_length = 5.0
script = ExtResource("1_iam6g")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_yl887")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="."]
shape = SubResource("SeparationRayShape2D_c7vyp")

[node name="pivot" type="Node2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="pivot"]
position = Vector2(0, -9.53674e-07)
scale = Vector2(0.108844, 0.176871)
texture = ExtResource("2_qjudr")

[node name="plant_detector" type="Area2D" parent="pivot"]
collision_layer = 0
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="pivot/plant_detector"]
position = Vector2(17, 12)
shape = SubResource("RectangleShape2D_hi4k3")

[node name="states" type="Node" parent="."]

[node name="idle" type="Node" parent="states"]
script = ExtResource("2_ulmaw")

[node name="walk" type="Node" parent="states"]
script = ExtResource("3_inp0e")

[node name="escape" type="Node" parent="states"]
script = ExtResource("5_h0d3m")

[node name="jump" type="Node" parent="states"]
script = ExtResource("4_yxcar")

[node name="drink" type="Node" parent="states"]
script = ExtResource("7_73qw6")

[node name="stagger" type="Node" parent="states"]

[node name="leave" type="Node" parent="states"]
script = ExtResource("8_bpmka")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_3ehli")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_dtv0y")
anim_player = NodePath("../AnimationPlayer")
advance_expression_base_node = NodePath("..")
parameters/playback = SubResource("AnimationNodeStateMachinePlayback_jijse")
parameters/drink/playback = SubResource("AnimationNodeStateMachinePlayback_rsec6")
parameters/leave/playback = SubResource("AnimationNodeStateMachinePlayback_qrla6")

[connection signal="area_entered" from="pivot/plant_detector" to="." method="_on_plant_detector_area_entered"]
[connection signal="area_exited" from="pivot/plant_detector" to="." method="_on_plant_detector_area_exited"]
